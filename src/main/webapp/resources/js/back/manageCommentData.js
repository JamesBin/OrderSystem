var ManageCommentData=function(){return{init:function(){$('#toExcel').on('click',function(){if($('.no-data').length==1){$('.tips').html('对不起，没有找到能导出的数据');$('#nullData').click();return}var form=$('#listForm');var action=form.attr('action');form.attr('action','../back/menuToExcel');form.submit();form.attr('action',action)});$('.closeModal').on('click',function(){$('.cancel').click()});$('#doc-modal-list').find('.am-icon-close').add('.doc-confirm-toggle').on('click',function(){$('#my-confirm').modal({relatedTarget:this})});$('.delAll').on('click',function(e){e.preventDefault();var chk_value=[];$('input[name="item"]:checked').each(function(){chk_value.push($(this).val())});if(chk_value==""){$('.tips').html('请选择要删除的项');$('#nullData').click();return}$.ajax({url:'../back/deleteUserBySelectId',type:'post',data:{'ids':chk_value.toString()},success:function(data){alert("删除成功");$('.search').click()},error:function(){alert("批量删除用户失败")}})});$('.reset').on('click',function(e){e.preventDefault();var id=$(this).attr('data-id');$.ajax({url:'../back/resetUserPwd',type:'post',data:{'user.id':id},success:function(data){alert('该用户密码重置成功')},error:function(){alert('重置密码失败')}})});$('.edit').on('click',function(e){e.preventDefault();var id=$(this).attr("data-id");$.ajax({url:'../back/getUserInfoById',type:'post',data:{'id':id},success:function(data){$('#editUsername').val(data.user.username);$('#editMobile').val(data.user.mobile);$('#editAddress').val(data.user.address);$('#editRemark').val(data.user.remark);$('#editId').val(data.user.id);console.log(data.user)},error:function(){alert('用户信息获取失败')}})});$('.cancel').on('click',function(){$('.am-dimmer').click()});$('.del').on('click',function(e){e.preventDefault();var id=$(this).attr("data-id");$('#delId').val(id)});$('.confirmDel').on('click',function(){var userId=$('#delId').val();$.ajax({url:'../back/deleteUser',type:'post',data:{'userId':userId},success:function(data){$('.search').click()},error:function(){alert('该用户有订单记录，请删除相应订单后，再进行用户操作！')}})})}}}();