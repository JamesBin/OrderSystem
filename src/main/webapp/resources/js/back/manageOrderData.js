var ManageOrderData=function(){return{init:function(){$('#toExcel').on('click',function(){if($('.no-data').length==1){$('.tips').html('对不起，没有找到能导出的数据');$('#nullData').click();return}var form=$('#listForm');var action=form.attr('action');form.attr('action','../back/orderToExcel');form.submit();form.attr('action',action)});$('.delAll').on('click',function(e){e.preventDefault();var chk_value=[];$('input[name="item"]:checked').each(function(){chk_value.push($(this).val())});if(chk_value==""){$('.tips').html('请选择要删除的项');$('#nullData').click();return}$.ajax({url:'../back/deleteOrderBySelectId',type:'post',data:{'ids':chk_value.toString()},success:function(data){alert("删除成功");$('.search').click()},error:function(){alert("批量删除用户失败")}})});$('.del').on('click',function(e){e.preventDefault();var id=$(this).attr('data-id')});$('.edit').on('click',function(e){e.preventDefault();var id=$(this).attr("data-id");$('#editId').val(id);$.ajax({url:'../back/getOrderInfoById',type:'post',data:{'id':id},success:function(data){$('#editStoreId').empty();$('#editTotal').val(data.saleOrder.total);$.each(data.storeList,function(i,item){if(data.saleOrder.storeId==item.id){$('#editStoreId').append("<option value='"+item.id+"' selected>"+item.storeName+"</option>")}else{$('#editStoreId').append("<option value='"+item.id+"'>"+item.storeName+"</option>")}})}})});$('.cancel').on('click',function(e){e.preventDefault();$('.am-dimmer').click()});$('#doc-modal-list').find('.am-icon-close').add('.doc-confirm-toggle').on('click',function(){$('#my-confirm').modal({relatedTarget:this})})}}}();